<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Árvore de Habilidades - Necromante</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #eee;
      padding: 20px;
    }
    .skill {
      border: 1px solid #555;
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 10px;
      background-color: #222;
    }
    .unlocked {
      background-color: #2c3e50;
      color: #0f0;
    }
    button {
      margin-top: 5px;
      padding: 5px 10px;
      background-color: #444;
      color: #fff;
      border: none;
      cursor: pointer;
    }
    button:disabled {
      background-color: #222;
      color: #888;
    }
  </style>
</head>
<body>

  <h1>Árvore de Habilidades - Necromante</h1>
  <p>Fama Atual: <span id="fame">0</span></p>
  <button onclick="gainFame(100)">Ganhar 100 de Fama</button>

  <div id="skills"></div>

  <script>
    class SkillNode {
      constructor(id, name, description, fameRequired, connectedNodes = [], unlocked = false) {
        this.id = id;
        this.name = name;
        this.description = description;
        this.fameRequired = fameRequired;
        this.connectedNodes = connectedNodes;
        this.unlocked = unlocked;
      }
    }

    const skillTree = {
      fame: 0,
      nodes: [
        new SkillNode(0, "Iniciação Sombria", "Desbloqueia acesso às magias necromânticas básicas.", 0, [1, 2], true),
        new SkillNode(1, "Esqueletos de Guerra", "Invoca dois esqueletos com dano físico moderado.", 100, [3]),
        new SkillNode(2, "Toque Espectral", "Ataque sombrio que reduz defesa inimiga.", 100, [4]),
        new SkillNode(3, "Legião dos Mortos", "Aumenta o número máximo de esqueletos invocados.", 250, []),
        new SkillNode(4, "Explosão Cadavérica", "Explode cadáveres causando dano em área.", 250, [])
      ],

      gainFame(amount) {
        this.fame += amount;
        document.getElementById("fame").textContent = this.fame;
        this.checkUnlocks();
        renderSkills();
      },

      checkUnlocks() {
        for (let node of this.nodes) {
          if (!node.unlocked && this.fame >= node.fameRequired) {
            const hasConnectedUnlocked = node.connectedNodes.some(id => this.nodes[id]?.unlocked);
            const isConnectedToUnlocked = this.nodes.some(n =>
              n.connectedNodes.includes(node.id) && n.unlocked
            );
            if (isConnectedToUnlocked || node.fameRequired === 0) {
              node.unlocked = true;
            }
          }
        }
      }
    };

    function gainFame(amount) {
      skillTree.gainFame(amount);
    }

    function renderSkills() {
      const container = document.getElementById("skills");
      container.innerHTML = "";

      skillTree.nodes.forEach(node => {
        const div = document.createElement("div");
        div.className = "skill" + (node.unlocked ? " unlocked" : "");
        div.innerHTML = `
          <h3>${node.name}</h3>
          <p>${node.description}</p>
          <p>Requer Fama: ${node.fameRequired}</p>
          <p>Status: ${node.unlocked ? "Desbloqueada" : "Bloqueada"}</p>
        `;
        container.appendChild(div);
      });
    }

    // Inicializar
    renderSkills();
  </script>

</body>
</html>
